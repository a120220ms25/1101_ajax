<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>學生資料管理系統</title>
    <link rel="shortcut icon" href="#" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
     <!---匯入要使用的函式庫--->
    <script src="jquery-2.1.4.min.js"></script>
  <style>
    table{
      width:80%;
      border-collapse: collapse;
      margin:auto;
    }
    td{
      padding:5px 10px;
      text-align: center;
      border:1px solid #ccc;
    }

    .btn-list{
      width:90%;
      margin:auto;
    }


  </style>
</head>
<body>
  <h1 class="header">學生資料管理系統</h1>
  <div class="btn-list">

    <button onclick="query('101')">一年一班</button>
    <button onclick="query('102')">一年二班</button>
    <button onclick="query('103')">一年三班</button>
    <button onclick="query('104')">一年四班</button>
    <button onclick="query('105')">一年五班</button>
    <button onclick="query('106')">一年六班</button>
    <button onclick="query('107')">一年七班</button>
    <button onclick="query('108')">一年八班</button>
    <button onclick="query('109')">一年九班</button>
    <button onclick="query('110')">一年十班</button>

  </div>

  
  <table id='students'></table>
  
</body>
</html>
<script>
/************************************
* 1.考慮觸發行為的事件
* 2.建立監聽行為
* 3.考慮是否需要代入參數
* 4.是否會有回傳值？回傳值的功用及處理？
* 5.是否需要更新畫面內容？更新畫面的方法？
************************************/


//新增資料的函式
function create(){

}
query('101')
//查詢資料的函式
/*
//後端回傳的資料如果是HTML格式,則直接放到對應的html標籤中
function query(classNum){
  $.get("api/query.php",{'classNum':classNum},function(students){  
    $("#students").html(students)
  })
} */

//後端回傳的資料如果是json格式,則需先解析成為js 物件後
//再由js製作所需的html標籤內容，再放到對應的html標籤中
function query(classNum){
  $.get("api/query.php",{'classNum':classNum},function(students){
    let stus=JSON.parse(students)
    let list='';
    stus.forEach(el => {
      list=list+`<tr>
                  <td class='id-num'>${el.id}</td>
                  <td>${el.nat_id}</td>
                  <td>${el.class_num}</td>
                  <td>${el.name}</td>
                  <td>${el.dept}</td>
                 </tr>`;
    });

    $("#students").html(list)
    
  })
}

//編輯資料的函式
function update(){

}

//刪除資料的函式
function del(){

}

</script>